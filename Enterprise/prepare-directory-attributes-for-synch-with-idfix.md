---
title: 使用 IdFix 工具準備目錄屬性以與 Office 365 進行同步處理
ms.author: josephd
author: JoeDavies-MSFT
manager: laurawi
audience: Admin
ms.topic: article
ms.service: o365-administration
localization_priority: Normal
ms.custom: Adm_O365
ms.collection:
- Ent_O365
- M365-identity-device-management
search.appverid:
- MET150
- MOE150
ms.assetid: 497593cf-24c6-491c-940b-7c86dcde9de0
description: 使用 IdFix 準備並清除您的內部部署目錄同步處理至 Office 365 之前加上提供的指示。
ms.openlocfilehash: ca00fe1ee8ad829a3b72e51b4e292c8ea3b81e48
ms.sourcegitcommit: 36e760407a1f4b18bc108134628ed9a8d3e35a8a
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 05/17/2019
ms.locfileid: "34162366"
---
# <a name="prepare-directory-attributes-for-synchronization-with-office-365-by-using-the-idfix-tool"></a>使用 IdFix 工具準備目錄屬性以與 Office 365 進行同步處理
本主題包含有關執行 IdFix 工具的詳細的指示一些常見的錯誤，您可能會遇到，建議的修正程式、 範例，以及如果您有大量的錯誤，該怎麼辦的最佳做法。
  
## <a name="fixing-errors-in-your-directory-by-using-the-idfix-gui"></a>使用 IdFix GUI 修正目錄中的錯誤
[執行 Office 365 IdFix 工具](install-and-run-idfix.md)來搜尋您目錄中的問題，然後修正 GUI 中的錯誤，本主題所述。 如果空白表格會傳回工具，所不發現任何錯誤。 如果有大量的目錄中的問題，它可能非常龐大的情況，當此工具會傳回錯誤。 一種方式來處理這是先修正某種類型的所有錯誤，然後再移至下一個類型。 
  
1. 在您開始進行變更之前，請看一下 IdFix 所呈現的建議。
    
2. 查看 IdFix 已傳回之錯誤的清單。 您可以藉由按一下**錯誤**頂端列出的錯誤類型的資料行的排序依錯誤類型的錯誤。 如果多個錯誤相關聯的單一屬性，錯誤會結合成一個資料列。 請儘可能 IdFix 會呈現的建議修正**UPDATE** ] 資料行中。 修正根據物件相關聯的其他屬性的核取。 雖然這些通常是優於已經是在目錄中，只有您決定哪一種確實準確。 
    
3. 如果 IdFix 的修正程式重複錯誤的建議，修正程式由下列其中一個 [**更新**] 欄中的值開頭的三個旗標，例如`[E]john.doe@contoso.com`。 如果當您套用變更，接受建議，標幟將不會插入目錄中。 只有下列旗標會套用，例如，建議值`john.doe@contoso.com`。 如果您想要接受建議，請從 [**動作**] 欄中選取相符的巨集指令。 旗標表示動作，如下所示： 
    
 - **[C]** 建議的動作**完成**。 值不需要進行編輯。
    
 - **[E]** 建議的**編輯**動作。 若要避免發生衝突的目錄中的另一個值，應該變更值。
    
 - **[R]** 建議的巨集指令**移除**。 此值為在非郵件 SMTP proxy 啟用物件，而且可能可以放心地移除。
    
4. 一次您已閱讀並瞭解錯誤，使用您的變更，更新 [**更新**] 欄中的項目，然後在 [**巨集指令**欄選取您想要如何實作變更 IdFix。 例如，可能會有兩位使用者`proxyAddress`識別為重複。 只有一位使用者可以使用`proxyAddress`進行郵件傳遞。 若要修正此問題，標示為正確的值，與使用者的 [**動作**] 欄**完成**及標記 [**動作**] 欄**中移除**的其他使用者。 這會移除`proxyAddress`屬性從使用者對象這`proxyAddress`不屬於和它讓使用者不會變更其這`proxyAddress`是否正確。
    
## <a name="common-errors-and-fixes-detected-by-idfix"></a>常見錯誤和 IdFix 偵測到的修正程式
下表描述 IdFix 偵測到，提供最常建議的修正程式，從工具]，並在某些情況下提供如何修正它們的範例的錯誤。

|**錯誤**|**錯誤類型描述**|**建議的修正程式**|**範例**|
|:-----|:-----|:-----|:-----|
|**字元** | 不合法的字元。 此值包含無效的字元。 | 建議的修正程式的 [**更新**] 欄中所顯示的錯誤會顯示與已移除無效字元的值。  <br/> | 有效的郵件地址的結尾行尾空格是不合法的字元，例如：  <br/> " `user@contoso.com` "  <br/> 有效的郵件地址的前置空格開頭是不合法的字元，例如：  <br/> " ` user@contoso.com `"  <br/>  `ú`字元是不合法的字元。 |
|**重複** | 重複的項目。 值有重複的查詢範圍內。 所有重複的值將會顯示為錯誤。 | 編輯或移除排除重複的值。 此工具不會提供建議的修正程式的重複項目。 相反地，您必須選擇這兩個或多個重複項目是正確的項目，並刪除重複項目或項目。 ||
|**format** | 錯誤的格式設定。 此值會違反屬性使用方式的格式需求。 | 建議的更新將會顯示的值，以移除任何無效字元。 如果有任何無效字元更新，並會出現值相同。 您必須決定您真的需要的更新。 此工具不會提供建議的修正程式的所有格式錯誤。 | 例如 SMTP 地址必須符合 RFC 2822 和 mailNickName 無法開頭或結尾的句號。 如需目錄屬性的格式需求的詳細資訊，請參閱[ Prepare to 佈建的使用者可透過目錄同步處理至 Office 365](prepare-for-directory-synchronization.md)中的 「 目錄物件和屬性準備 」。 |
|topleveldomain  <br/> |上方層級的網域。 這適用於受限於[RFC 2822](https://go.microsoft.com/fwlink/p/?LinkId=401464)格式設定的值。 如果最上層網域不是網際網路可路由傳送這將會被識別為錯誤。 例如.local 結尾的 SMTP 地址網際網路可路由傳送並不會造成此錯誤。 |例如，將值變更為網際網路路由傳送的網域`.com`或`.net`。 | 變更`myaddress@fourthcoffee.local`以`fourthcoffee.com`或另一個網際網路路由傳送的網域。  <br/> 如需相關指示，請參閱 <<c0>如何準備目錄同步處理的非可路由網域 （例如.local 網域）。 |
|**網域** | 網域組件時發生錯誤。 這適用於受限於 RFC 2822 格式設定的值。 如果值的網域部分不正確，且不符合 RFC 2822，這將會產生。 | 將值變更為一個符合 RFC 2822。 例如，請確定它不會包含任何空格或不合法的字元。 | 變更`myaddress@fourth coffee.com`以`myaddress@fourthcoffee.com`。 |
|**domainpart_localpart** | 本機組件時發生錯誤。 這適用於受限於 RFC 2822 格式設定的值。 如果值的本機部分不正確，且不符合 RFC 2822，這將會產生。 |將值變更為一個符合 RFC 2822。 例如，請確定它不會包含任何空格或不合法的字元。 |變更`my"work"address@fourthcoffee.com`以`myworkaddress@fourthcoffee.com`。 |
|**length** | 長度時發生錯誤。 此值會違反屬性的長度限制。 這是最常遇到時已經變更的目錄結構描述。  | IdFix 所建議的更新會將值截斷為可接受的長度。  <br/> 請注意，這可能會產生不良的後果。 您應該檢閱建議的修正程式，並視需要變更它再按一下 [**套用]**。 ||
|**空白**  | 空白或 null 時發生錯誤。 此值會違反屬性，以進行同步處理的 null 限制。 只有幾個屬性必須包含值。 | 如果可能的話，建議的更新將利用其他屬性的值來產生可能的替代方案。 ||
|**mailmatch** | 這僅適用於 Office 365 專用。 值不符合郵件屬性。 | 建議的更新將會在前面加上的郵件屬性值"SMTP:"。 ||
    
## <a name="operations-you-can-perform-by-using-idfix"></a>您可以使用 IdFix 執行的作業
若要修正錯誤，您會從 [**動作**] 下拉式清單選取選項。 下表說明您可以使用 IdFix 工具屬性執行的**動作**作業。 如果您將 [**動作**] 欄保留空白，IdFix 工具不會採取任何動作在目錄中的特定錯誤。 

|**巨集指令**|**動作描述**|**範例**|
|:-----|:-----|:-----|
|**完成** | 原始值是可接受的而且應該不會變更，而不管識別為錯誤。 | 兩個使用者已識別為重複的 proxyAddress。 只有一個可以使用郵件傳遞的值。 將具有正確的值的使用者標記為**完成**。 |
|**移除** | 屬性值將會從來源物件中刪除。 多重值屬性，例如，若是`proxyAddresses`，只顯示個別值將被刪除。 | 兩個使用者已識別為重複的 proxyAddress。 只有一個可以使用郵件傳遞的值。 標示重複的值的使用者**移除**。 |
|**編輯** | 在 [**更新**] 欄中的資訊將用來修改屬性值。 如果有已 IdFix 所建議的有效值的**更新**，然後從 [**動作**] 欄中，選取 [**編輯**]，移至下一個錯誤。 如果您不喜歡建議，請輸入一個新 [**更新**] 欄中的，然後，從 [**動作**] 欄中選取 [**編輯**。 ||
|**復原** | 如果您已還原的交易記錄檔，這個選項只有。 如果您選取 [**復原**]，屬性值將會還原成原始值。 ||
|**FAIL** | 如果**更新**值具有 AD DS 規則未知的衝突，則只會傳回此值。 在此情況下，您可以編輯 [**更新**] 欄中的值一次如果您知道失敗的功能。 它可能需要分析使用 ADSI 編輯的物件中的值。 如需詳細資訊，請參閱[ADSI 編輯 (adsiedit.msc)](https://go.microsoft.com/fwlink/p/?LinkId=401170)。 ||

選擇之後發生錯誤或批次的錯誤、**巨集指令**，請按一下 [**套用**]。 當您按一下 [**套用]** 時，此工具會在目錄中進行的變更。 再按一下 [**套用]** ，並 IdFix 會將它們變更所有在同一時間時，您便可以提供多個錯誤的修正程式。

執行 IdFix 再次以確保您所做的修正程式並未引進新的錯誤。 您可以重複這些步驟，為您需要的次數。 它是不錯的選項以通過程序多次再進行同步處理。
    
## <a name="changing-the-rule-set-used-by-idfix"></a>變更 IdFix 所使用的規則集
依預設，IdFix 會使用多重租用戶規則設定為在您的目錄中測試項目。 這是設定大部分的 Office 365 的右規則 = 客戶。 不過，如果您是 Office 365 專用或 ITAR （國際流量武器法規） 客戶，您可以設定要使用的專用的規則集改為 IdFix。 如果您不確定哪種您的客戶，您可以放心地略過此步驟。 若要設定設定為專用的規則，按一下功能表列中的齒輪圖示，然後按一下 [**專用**。
  
## <a name="changing-the-scope-of-the-search-used-by-idfix"></a>變更 IdFix 所使用的搜尋範圍
根據預設，IdFix 會搜尋整個目錄中。 如果您想，您可以設定工具來改為搜尋特定的樹狀子目錄。 若要這麼做，請在功能表列中，按一下 [篩選] 圖示，並輸入有效的樹狀子目錄。
  
## <a name="rolling-back-your-changes-by-using-the-idfix-gui"></a>使用 IdFix GUI 回復變更
按一下 [**套用**] 以套用變更，每次 IdFix 工具會建立一個稱為列出您剛才做的變更交易記錄檔的不同檔案。 您可以使用交易記錄檔將回復處於最新的記錄檔，以防您犯只是這些變更。 如果您要更新時出錯，您可以藉由按一下 [**復原**復原最近套用的變更。 當您按一下 [**復原**] 時，IdFix 會使用交易記錄檔來復原只會在最新的交易記錄檔的變更。 如需使用交易記錄檔的詳細資訊，請參閱[參照： Office 365 IdFix 交易記錄檔](idfix-transaction-log.md)。

## <a name="next-step"></a>下一步

[設定目錄同步處理](set-up-directory-synchronization.md)
